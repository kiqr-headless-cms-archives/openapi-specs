---
openapi: 3.0.1
info:
  title: Core API
  description: Core API for KIQR Headless CMS
  version: 0.5.1
paths:
  "/":
    get:
      summary: Welcome message
      tags:
      - Welcome
      responses:
        '200':
          description: Returns a welcome message
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: KIQR Content API
                  apiVersion:
                    type: integer
                    example: 1
                  engineVersion:
                    type: string
                    example: 1.0.0
  "/tokeninfo":
    get:
      summary: Returns current user, project and environment.
      tags:
      - Authentication
      operationId: getTokenInfo
      security:
      - AppId: []
        BearerAuth: []
      responses:
        '401':
          description: Missing AppId
          content:
            application/json:
              schema:
                "$ref": "#/components/responses/InvalidAppIdError"
        '200':
          description: Returns tokeninfo
          content:
            application/json:
              schema:
                "$ref": "#/components/responses/TokenInfoResponse"
servers:
- url: https://api.kiqr.cloud/v1
components:
  securitySchemes:
    AppId:
      type: apiKey
      name: AppId
      in: header
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      required:
      - id
      - name
      - updated_at
      - created_at
      properties:
        id:
          type: string
          example: user_zWNY2gOL1xwrYuRqXQnjJZyP
        name:
          type: string
          example: David Specimen
        updated_at:
          type: string
          format: date-time
          example: 023-02-13T18:57:03Z
        created_at:
          type: string
          format: date-time
          example: '2023-01-17T09:36:08Z'
      additionalProperties: false
    Environment:
      type: object
      required:
      - id
      - name
      - updated_at
      - created_at
      properties:
        id:
          type: string
          example: env_RKGOXN3jqMznkC0MDBz1yLr2
        name:
          type: string
          example: main
        environment_type:
          type: string
          example: development
        updated_at:
          type: string
          format: date-time
          example: 023-02-13T18:57:03Z
        created_at:
          type: string
          format: date-time
          example: '2023-01-17T09:36:08Z'
      additionalProperties: false
    Project:
      type: object
      required:
      - id
      - name
      - updated_at
      - created_at
      properties:
        id:
          type: string
          example: my-project-name
        name:
          type: string
          example: My project name
        updated_at:
          type: string
          format: date-time
          example: 023-02-13T18:57:03Z
        created_at:
          type: string
          format: date-time
          example: '2023-01-17T09:36:08Z'
      additionalProperties: false
  responses:
    InvalidAppIdError:
      description: Missing or invalid AppId
    InvalidTokenError:
      description: Missing or invalid token
    TokenInfoResponse:
      type: object
      required:
      - environment
      - project
      - user
      properties:
        environment:
          "$ref": "#/components/schemas/Environment"
        project:
          "$ref": "#/components/schemas/Project"
        user:
          "$ref": "#/components/schemas/User"
